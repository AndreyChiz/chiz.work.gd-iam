–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–æ–≥–∏–Ω–∏—Ç—Å—è ‚Äî —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

    Access —Ç–æ–∫–µ–Ω –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞ (JSON)

    Refresh —Ç–æ–∫–µ–Ω ‚Äî –≤ HttpOnly cookie

–ö–ª–∏–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç access —Ç–æ–∫–µ–Ω –≤ –ø–∞–º—è—Ç–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫:

Authorization: Bearer <access_token>

–ü—Ä–∏ –∫–∞–∂–¥–æ–º API –∑–∞–ø—Ä–æ—Å–µ access —Ç–æ–∫–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

–ï—Å–ª–∏ access —Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫, –∫–ª–∏–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ /auth/refresh:

    –í –∑–∞–ø—Ä–æ—Å–µ refresh —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º –≤ cookie

    –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏, –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π, –≤—ã–¥–∞–µ—Ç –Ω–æ–≤—ã–π access —Ç–æ–∫–µ–Ω

–ö–ª–∏–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç access —Ç–æ–∫–µ–Ω –≤ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É.




üîê 1. POST /auth/login

–û–ø–∏—Å–∞–Ω–∏–µ: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–¥–∞—á–∞ access_token + refresh_token.

–§–æ—Ä–º–∞ –¥–∞–Ω–Ω—ã—Ö:

{
  "username": "user@example.com",
  "password": "your_password"
}

–û—Ç–≤–µ—Ç:

{
  "access_token": "<JWT>",
  "refresh_token": "<JWT>",
  "token_type": "bearer"
}

üîÅ 2. POST /auth/refresh

–û–ø–∏—Å–∞–Ω–∏–µ: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access_token –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É refresh_token.

–§–æ—Ä–º–∞ –¥–∞–Ω–Ω—ã—Ö:

{
  "refresh_token": "<JWT>"
}

–û—Ç–≤–µ—Ç:

{
  "access_token": "<NEW_JWT>",
  "token_type": "bearer"
}

üßæ 3. GET /auth/me

–û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø–æ access_token.

–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–ø—Ä–æ—Å–∞:

Authorization: Bearer <access_token>

–û—Ç–≤–µ—Ç:

{
  "id": 1,
  "username": "user",
  "is_admin": false,
  ...
}

üö™ 4. POST /auth/logout (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–û–ø–∏—Å–∞–Ω–∏–µ: –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è refresh-—Ç–æ–∫–µ–Ω–∞. –ü–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Å–ø–∏—Å–æ–∫ –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –∏–ª–∏ —Ö—Ä–∞–Ω–∏—à—å refresh'–∏ –≤ Redis/–ë–î.
‚úèÔ∏è 5. POST /auth/register (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)

–û–ø–∏—Å–∞–Ω–∏–µ: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
üßØ 6. POST /auth/revoke (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–û–ø–∏—Å–∞–Ω–∏–µ: –Ø–≤–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤—ã—Ö–æ–¥–∞ —Å–æ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤).
üìå –ò—Ç–æ–≥–æ ‚Äî –±–∞–∑–æ–≤—ã–µ —Ä—É—á–∫–∏:
–ú–µ—Ç–æ–¥	–ü—É—Ç—å	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
POST	/auth/login	–õ–æ–≥–∏–Ω –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
POST	/auth/refresh	–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access_token
GET	/auth/me	–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
POST	/auth/logout	–í—ã—Ö–æ–¥/–æ—Ç–∑—ã–≤ refresh —Ç–æ–∫–µ–Ω–∞
POST	/auth/register	–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST	/auth/revoke	–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ (–æ–ø—Ü.)
